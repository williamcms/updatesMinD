//
// Código por William Di Biasi Bogik
// 
//
$(document).ready(function(){
	'use strict';

	var copyText = (copyText = (text) =>{
		navigator.clipboard.writeText(text);
	});
	var changeNews = $('select[name=emailType]').on('change', function(){
		let type0 = $('.emailType-0'),
		type1 = $('.emailType-1');

		let selectedType = $(this).find('option:selected').val();

		if(selectedType == 0){
			type0.slideDown();
			type1.slideUp();
		}else if(selectedType == 1){
			type0.slideUp();
			type1.slideDown();
		}
		//Limpa o HTML renderizado
		$('#viewRenderedHTML').empty()
		$('#viewHTMLCode').empty()
	});
	var mountResults = $(document).on('click', '.getDetails', function(){
		let inputN = $(this).data('input'),
		ref = $('input[name=vitrine-'+ inputN +']').val(),
		product = {};

		$.ajax({
			accept: "application/vnd.vtex.ds.v10+json",
			contentType: 'application/json; charset=utf-8',
			crossDomain: false,
			type: 'GET',
			url: '/api/catalog_system/pub/products/search/?fq=alternateIds_RefId:' + ref
		}).done(function(e){
			//Pega o melhor parcelamento
			let prices = {},
			currencySymbol = 'R$ ';
			$.each(e.first().items.first().sellers.first().commertialOffer.Installments, function(x){
				if((this.Value < prices.Value || prices.Value == null) && (this.NumberOfInstallments > prices.NumberOfInstallments || prices.NumberOfInstallments == null)){
					prices = {
						'NumberOfInstallments' : this.NumberOfInstallments,
						'Value' : this.Value
					}
				}
			})
			//Pega os dados do produto
			product = {
				name: e.first().productName,
				priceP: currencySymbol + (e.first().items.first().sellers.first().commertialOffer.ListPrice).toFixed(2).replace(/\./, ","),
				priceN: currencySymbol + (e.first().items.first().sellers.first().commertialOffer.PriceWithoutDiscount).toFixed(2).replace(/\./, ","),
				installments: prices.NumberOfInstallments + 'x ' + currencySymbol + (prices.Value).toFixed(2).replace(/\./, ","),
				qty: e.first().items.first().sellers.first().commertialOffer.AvailableQuantity,
				image: e.first().items.first().images.first().imageUrl,
				link: e.first().link
			}
			//Remove priceP se os preços forem iguais (não há desconto)
			if(product.priceP === product.priceN){
				product.priceP = '';
			}
			if($('.row.newFields[data-input='+ inputN +']').length >= 1){
				$('.row.newFields').find('input[name=vitrine-name-'+ inputN +']').val(product.name);
				$('.row.newFields').find('input[name=vitrine-priceP-'+ inputN +']').val(product.priceP);
				$('.row.newFields').find('input[name=vitrine-priceN-'+ inputN +']').val(product.priceN);
				$('.row.newFields').find('input[name=vitrine-installments-'+ inputN +']').val(product.installments);
				$('.row.newFields').find('input[name=vitrine-link-'+ inputN +']').val(product.link + '?reportEmail=produto_' + inputN);
				$('.row.newFields').find('input[name=vitrine-image-'+ inputN +']').val((product.image).replace(/\d+/g, "$&-290-435"));
				$('.row.newFields').find('input[name=vitrine-qty-'+ inputN +']').val(product.qty);
			}
			
			$('#vitrines').find('a.getDetails[data-input='+ inputN +']').removeClass('change');
			$('#vitrines').find('a.getDetails[data-input='+ inputN +']').addClass('complete');
		});
	});
	var changeIconVitrines = $(document).on('change keyup paste', '#vitrines input', function(){
		$('#vitrines').find('a.getDetails[data-input='+ $(this).data('input') +']').removeClass('complete');
		$('#vitrines').find('a.getDetails[data-input='+ $(this).data('input') +']').addClass('change');
	});
	var addField = $('.btn-add').on('click', function(){
		let referId = $(this).data('refer'),
		container = $('#' + referId),
		eFields = container.find('.form-group'),
		clone = eFields,
		html = clone[0].outerHTML;
		html = html.replaceAll(1, eFields.length + 1).replaceAll(0, eFields.length);

		container.append($(html));
	});
	var rmvField = $(document).on('click', '.btn-remove', function(){
		let referInput = $(this).data('input'),
		referId = $(this).data('refer');

		$('#'+ referId +' > .form-group')[referInput].remove()
	});
	var mountHTML = $('#generateHTML').on('click', function(){
		let type = $('select[name=emailType]').val();

		if(type == 1){
			// news/foter - 1
			let html = '<table class="nl-container" style="table-layout: fixed; vertical-align: top; min-width: 320px; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #ffffff; width: 100%;" cellpadding="0" cellspacing="0" role="presentation" width="100%" bgcolor="#FFFFFF" valign="top"><tbody><tr><td style="opacity:0;font-size:0;">SUBSTITUIR-PREHEADER</td></tr><tr style="vertical-align: top;" valign="top"><td style="word-break: break-word; vertical-align: top;" valign="top"><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff; background-image: undefined; background-position: undefined; background-repeat: undefined;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px;"><div class="img-container center autowidth" align="center" style="padding-right: 0px; padding-left: 0px;"><div style="display:none;">Decore a sua casa com os objetos de decoração modernos e cheios de personalidade da Casa MinD. Nós oferecemos decoração, iluminação, mobiliário e muito mais em estilos contemporâneos e designs inspiradores. Apaixone-se pela sua casa todos os dias!</div><a href="https://www.casamind.com.br" style="outline: none;" rel="noopener noreferrer" tabindex="-1"><img class="center autowidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news_cab_rod_600px_mind_1.png" style="text-decoration: none; -ms-interpolation-mode: bicubic; height: auto; border: 0; width: 74px; max-width: 100%; display: block; margin: 0 auto;" width="74" alt="Logo" title="Logo" /></a></div></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px 0px 0px 0px;"><table class="divider" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td class="divider_inner" style="word-break: break-word; vertical-align: top; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; padding: 10px;" valign="top"><table class="divider_content" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-top: 1px solid transparent; width: 100%;" align="center" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td style="word-break: break-word; vertical-align: top; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" valign="top"><span></span></td></tr></tbody></table></td></tr></tbody></table></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 0px;">BANNERTOPFOOTER</div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 0px;"><table class="divider" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td class="divider_inner" style="word-break: break-word; vertical-align: top; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; padding: 10px;" valign="top"><table class="divider_content" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-top: 1px solid #BBBBBB; width: 100%;" align="center" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td style="word-break: break-word; vertical-align: top; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" valign="top"><span></span></td></tr></tbody></table></td></tr></tbody></table></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid two-up" style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div style="min-width: 0; width: 90px;"> </div><div class="col num6" style="display: table-cell; vertical-align: top; max-width: 320px; min-width: 163px; width: 163px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 5px 5px 0px;"><div class="img-container center autowidth" align="center" style="padding-right: 0px; padding-left: 0px;"><a href="https://www.casamind.com.br/promocao" target="_blank" style="outline: none;" rel="noopener noreferrer" tabindex="-1"><img class="center autowidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/editor_images/botao_promo_1_1.png" alt="Botão: Entra no link de Promoções" title="Botão: Entra no link de Promoções" style="text-decoration: none; -ms-interpolation-mode: bicubic; height: auto; border: 0; width: 158px; max-width: 100%; display: block;" width="158" /></a></div></div></div></div><div class="col num6" style="display: table-cell; vertical-align: top; max-width: 320px; min-width: 163px; width: 163px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 5px;"><div class="img-container center autowidth" align="center" style="padding-right: 0px; padding-left: 0px;"><a href="https://www.casamind.com.br/decoracao/VASOS-E-CACHEPOTS?O=OrderByScoreASC" target="_blank" style="outline: none;" rel="noopener noreferrer" tabindex="-1"><img class="center autowidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/editor_images/botao_vasos_1.png" alt="Botão: Entra no link de Vasos & Cachepots" title="Botão: Entra no link de Vasos & Cachepots" style="text-decoration: none; -ms-interpolation-mode: bicubic; height: auto; border: 0; width: 158px; max-width: 100%; display: block;" width="158" /></a></div></div></div></div><div style="min-width: 0; width: 90px;"> </div></div></div></div><div style="background-color: transparent;"><div class="block-grid two-up" style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div style="flex: 1 1 0px; min-width: 0; width: 90px;"> </div><div class="col num6" style="display: table-cell; vertical-align: top; max-width: 320px; min-width: 163px; width: 163px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 5px 5px 0px;"><div class="img-container center autowidth" align="center" style="padding-right: 0px; padding-left: 0px;"><a href="https://www.casamind.com.br/novidades" target="_blank" style="outline: none;" rel="noopener noreferrer" tabindex="-1"><img class="center autowidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/editor_images/botao_novidades_1.png" alt="Botão: Entra no link de Novidades" title="Botão: Entra no link de Novidades" style="text-decoration: none; -ms-interpolation-mode: bicubic; height: auto; border: 0; width: 158px; max-width: 100%; display: block;" width="158" /></a></div></div></div></div><div class="col num6" style="display: table-cell; vertical-align: top; max-width: 320px; min-width: 163px; width: 163px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 5px;"><div class="img-container center autowidth" align="center" style="padding-right: 0px; padding-left: 0px;"><a href="https://www.casamind.com.br/moveis2?O=OrderByScoreASC" target="_blank" style="outline: none;" rel="noopener noreferrer" tabindex="-1"><img class="center autowidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/editor_images/botao_moveis_1.png" alt="Botão: Entra no link de Móveis" title="Botão: Entra no link de Móveis" style="text-decoration: none; -ms-interpolation-mode: bicubic; height: auto; border: 0; width: 158px; max-width: 100%; display: block;" width="158" /></a></div></div></div></div><div style="flex: 1 1 0px; min-width: 0; width: 90px;"> </div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 0px;"><table class="divider" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td class="divider_inner" style="word-break: break-word; vertical-align: top; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; padding: 0px;" valign="top"><table class="divider_content" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-top: 1px solid transparent; width: 100%;" align="center" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td style="word-break: break-word; vertical-align: top; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" valign="top"><span></span></td></tr></tbody></table></td></tr></tbody></table></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid two-up" style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num6" style="display: table-cell; vertical-align: middle; max-width: 320px; min-width: 300px; width: 300px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px;"><div style="color: #555555; font-family: Roboto, Tahoma, Verdana, Segoe, sans-serif; letter-spacing: 0px; line-height: 1.2; padding: 0;"><div class="txtTinyMce-wrapper" style="font-size: 14px; line-height: 1.2; font-family: Roboto, Tahoma, Verdana, Segoe, sans-serif; color: #555555; letter-spacing: 0px; mso-line-height-alt: 17px;"><p style="margin: 0; font-size: 12px; line-height: 1.2; word-break: break-word; text-align: left; mso-line-height-alt: 14px; letter-spacing: normal; margin-top: 0; margin-bottom: 0;"><span style="font-size: 12px;"><a href="https://www.casamind.com.br/central-de-relacionamento" style="color: #e94273; text-decoration: none;">CENTRAL DE RELACIONAMENTO</a></span></p></div></div></div></div></div><div class="col num6" style="display: table-cell; vertical-align: top; max-width: 320px; min-width: 300px; width: 300px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 0px;"><div class="img-container center autowidth" align="right" style="padding-right: 0px; padding-left: 0px;"><a href="https://www.instagram.com/casamindbr/" style="margin-left: 0; width: 100%; height: 100%;" target="_blank" rel="noopener noreferrer"><img class="center fixedwidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__ig_30px.png" style="max-width: 100%; display: inline-block; height: 31px; width: auto;" width="30" height="30" alt="Logo Instagram" /></a><a href="https://www.facebook.com/casamind" style="margin-left: 9.166575px; width: 100%; height: 100%;" target="_blank" rel="noopener noreferrer"><img class="center fixedwidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__fb_30px.png" style="text-decoration: none; -ms-interpolation-mode: bicubic; border: 0; max-width: 100%; display: inline-block; height: 31px; width: auto;" width="30" height="30" alt="Logo Facebook" /></a><a href="https://br.pinterest.com/casamind/" style="margin-left: 9.166575px; width: 100%; height: 100%;" target="_blank" rel="noopener noreferrer"><img class="center fixedwidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__pin_30px.png" style="max-width: 100%; display: inline-block; height: 31px; width: auto;" width="30" height="30" alt="Logo Pinterest" /></a><a href="https://open.spotify.com/user/haj0455ld4irud1xncxa0ho3p#_=_" style="margin-left: 9.166575px; width: 100%; height: 100%;" target="_blank" rel="noopener noreferrer"><img class="center fixedwidth" align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__spot_30px.png" style="max-width: 100%; display: inline-block; height: 31px; width: auto;" width="30" height="30" alt="Logo Spotify" /></a></div></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 0px 0px;"><table class="divider" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td class="divider_inner" style="word-break: break-word; vertical-align: top; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; padding: 5px 0;" valign="top"><table class="divider_content" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-top: 1px solid #000000; width: 100%;" align="center" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td style="word-break: break-word; vertical-align: top; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" valign="top"><span></span></td></tr></tbody></table></td></tr></tbody></table></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid two-up" style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num6" style="display: table-cell; vertical-align: middle; max-width: 320px; min-width: 300px; width: 300px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px;"><div style="color: #555555; font-family: Roboto, Tahoma, Verdana, Segoe, sans-serif; line-height: 1.2; padding: 0px;"><div class="txtTinyMce-wrapper" style="font-size: 14px; line-height: 1.2; font-family: Roboto, Tahoma, Verdana, Segoe, sans-serif; color: #555555; mso-line-height-alt: 17px;"><p style="margin: 0; font-size: 10px; line-height: 1.2; word-break: break-word; text-align: left; mso-line-height-alt: 12px; margin-top: 0; margin-bottom: 0;"><span style="font-size: 10px;">APROVEITE O CUPOM <span style="background-color: #000000; color: #ffffff;"><strong>MIND10</strong></span><strong> </strong>E GANHE 10% OFF NAS LOJAS*</span></p><p style="font-size: 9px; line-height: 1; word-break: break-word; text-align: left; mso-line-height-alt: 12px; margin-top: 5px; margin-bottom: 0; color: #808080;font-style: italic;">*Cupom válido apenas nas lojas online</p></div></div></div></div></div><div class="col num6" style="display: table-cell; vertical-align: top; max-width: 320px; min-width: 300px; width: 300px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 0px;"><div class="img-container autowidth" align="right" style="padding-right: 0px; padding-left: 0px;"><a href="https://guten.com.br/" target="_blank" rel="noopener noreferrer"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__guten_maior.png" style="height: 13px; border: 0; width: auto; max-width: 100%; display: inline-block;" width="58" height="13" /></a> <a href="https://loja.imaginarium.com.br" target="_blank" rel="noopener noreferrer"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__img_maior.png" style="height: 17px; border: 0; width: auto; padding-left: 5px; max-width: 100%; display: inline-block;" width="77" height="17" /></a> <a href="https://www.lovebrands.com.br" target="_blank" rel="noopener noreferrer"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__love_maior.png" style="height: 21px; border: 0; width: auto; padding-left: 5px; max-width: 100%; display: inline-block;" width="51" height="21" /></a> <a href="https://www.puket.com.br/" target="_blank" rel="noopener noreferrer"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__puket_maior.png" style="height: 21px; border: 0; width: auto; padding-left: 5px; max-width: 100%; display: inline-block;" width="56" height="21" /></a></div></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px 0px 5px 0px;"><table class="divider" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td class="divider_inner" style="word-break: break-word; vertical-align: top; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; padding: 5px 0;" valign="top"><table class="divider_content" border="0" cellpadding="0" cellspacing="0" width="100%" style="table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-top: 1px solid #000000; width: 100%;" align="center" role="presentation" valign="top"><tbody><tr style="vertical-align: top;" valign="top"><td style="word-break: break-word; vertical-align: top; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%;" valign="top"><span></span></td></tr></tbody></table></td></tr></tbody></table></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px;"><div style="color: #555555; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; line-height: 1.2; padding: 0px;"><div class="txtTinyMce-wrapper" style="font-size: 14px; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; color: #555555; mso-line-height-alt: 17px;"><p style="margin: 0; font-size: 10px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 12px; margin-top: 0; margin-bottom: 0;"><span style="font-size: 10px;">Você está incrito como <span style="color: #e94273; text-decoration: none;">*|EMAIL|*</span></span></p></div></div></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid two-up" style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num6" style="display: table-cell; vertical-align: top; max-width: 320px; min-width: 300px; width: 300px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 0px;"><div style="color: #555555; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; line-height: 1.2; padding: 0px;"><div class="txtTinyMce-wrapper" style="font-size: 14px; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; color: #555555; mso-line-height-alt: 17px;"><p style="margin: 0; font-size: 10px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 12px; margin-top: 0; margin-bottom: 0;"><span style="font-size: 10px;"><a href="https://www.casamind.com.br/account" style="color: #e94273; text-decoration: none;">Atualize suas informações</a> ou <a href="[unsubscribe]" style="color: #e94273; text-decoration: none;">descadastre-se</a></span></p></div></div></div></div></div><div class="col num6" style="display: table-cell; vertical-align: top; max-width: 320px; min-width: 300px; width: 300px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 5px 0px 5px 0px;"><div style="color: #555555; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; line-height: 1.2; padding: 0px;"><div class="txtTinyMce-wrapper" style="font-size: 14px; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; color: #555555; mso-line-height-alt: 17px;"><p style="margin: 0; font-size: 10px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 12px; margin-top: 0; margin-bottom: 0;"><span style="font-size: 10px;"><a href="https://www.casamind.com.br/institucional/seguranca-e-privacidade" style="color: #e94273; text-decoration: none;">Política de privacidade</a></span></p></div></div></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px;"><div style="color: #555555; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; line-height: 1.2; padding: 0px;"><div class="txtTinyMce-wrapper" style="font-size: 12px; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; color: #555555; mso-line-height-alt: 14px;"><p style="margin: 0; font-size: 10px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 12px; margin-top: 0; margin-bottom: 0;"><span style="font-size: 10px;">UNI.CO Comércio S/A. | CNPJ 00.399.603/0008-84</span></p></div></div></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px;"><div style="color: #555555; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; line-height: 1.2; padding: 0px;"><div class="txtTinyMce-wrapper" style="font-size: 14px; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; color: #555555; mso-line-height-alt: 17px;"><p style="margin: 0; font-size: 10px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 12px; margin-top: 0; margin-bottom: 0;"><span style="font-size: 10px;">Rua Hélio Ossamu Daikuara, 1445 - Galpão 07A</span></p></div></div></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px;"><div style="color: #555555; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; line-height: 1.2; padding: 0px;"><div class="txtTinyMce-wrapper" style="font-size: 14px; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; color: #555555; mso-line-height-alt: 17px;"><p style="margin: 0; font-size: 10px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 12px; margin-top: 0; margin-bottom: 0;"><span style="font-size: 10px;">CEP 06807-000, Jardim Vista Alegre, Embu das Artes - SP</span></p></div></div></div></div></div></div></div></div><div style="background-color: transparent;"><div class="block-grid " style="min-width: 320px; max-width: 601px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: #ffffff;"><div style="border-collapse: collapse; display: table; width: 100%; background-color: #ffffff;"><div class="col num12" style="min-width: 320px; max-width: 601px; display: table-cell; vertical-align: top; width: 601px;"><div class="col_cont" style="width: 100% !important;"><div style="border: 0px solid transparent; padding: 0px;"><div style="color: #555555; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; line-height: 1.2; padding: 0px;"><div class="txtTinyMce-wrapper" style="font-size: 14px; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; color: #555555; mso-line-height-alt: 17px;"><p style="margin: 0; font-size: 10px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 12px; margin-top: 0; margin-bottom: 0;"><span style="font-size: 10px;">© 2021 <a style="color: #e94273; text-decoration: none;">casamind.com.br</a>. Todos os direitos reservados</span></p></div></div></div></div></div></div></div></div></td></tr></tbody></table>',
			banner = '<div class="img-container center autowidth big" align="center" style="padding-right: 0px; padding-left: 0px;"><a href="BANNERLINK" title="BANNERALT"><img class="center autowidth" align="center" border="0" src="BANNERIMAGEM" alt="BANNERALT" title="BANNERALT" style="text-decoration: none; -ms-interpolation-mode: bicubic; height: auto; border: 0; width: 601px; max-width: 100%; display: block;" width="601" /></a></div>',
			preheader = $('input[name=preheader]').val(),
			bannerTemp = '';
			
			$.each($('#bannerstopfooter > .form-group'), function(i){
				let bannerimage = $(this).find('input[name=banners-image-'+ i +']').val(),
				bannerlink = $(this).find('input[name=banners-link-'+ i +']').val(),
				bannertitle = $(this).find('input[name=banners-title-'+ i +']').val();

				bannerTemp += banner.replaceAll('BANNERLINK', bannerlink).replaceAll('BANNERALT', bannertitle).replaceAll('BANNERIMAGEM', bannerimage);
				
			});

			html = html.replaceAll('SUBSTITUIR-PREHEADER', preheader).replaceAll('BANNERTOPFOOTER', bannerTemp);
			$('#viewRenderedHTML').html(html)
			$('#viewHTMLCode').text(html)

		}else if(type == 0){
			// vitrines
			let html = '<!DOCTYPE html><html lang="br"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta http-equiv="cleartype" content="on"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/><meta name="robots" content="noindex, nofollow"/><link rel="shortcut icon" href="https://lojapuket.vteximg.com.br/arquivos/favicon.ico"/><title>MinD</title></head><body><table cellpadding="0" cellspacing="0" border="0" align="center" width="100%" style="font-family: ff-cocon-pro, Lucida Sans Unicode, Arial, sans-serif; font-weight: 100; color:#666666; background-color: #ffffff;" bgcolor="#ffffff"><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730" height="30"><tr><td style="opacity:0;font-size:0;">SUBSTITUIR-PREHEADER</td></tr></table></td></tr><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730" bgcolor="#FFFFFF" style="background-color: transparent;"><tr><td style="width:324px"></td><td><a href="https://www.casamind.com.br/?ReportEmail=header_home" target="_blank"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news_cab_rod_600px_mind_1.png" alt="Casa MinD" title="Casa MinD" width="100%" border="0" style="display:block;" align="center"></a></td><td style="width:324px"></td></tr></table></td></tr><tr style="height:13px"><td></td></tr><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730" bgcolor="#FFFFFF" style="background-color: transparent;">SUBSTITUIR-MENU</table></td></tr>SUBSTITUIR-BANNER-TOP<tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tr><td height="24"></td></tr></table></td></tr><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tr><td align="center"><font style="color: CORDOTITULOVITRINE;font-size: 24px;text-decoration: none;font-weight: bold;">SUBSTITUIR-TITLE-VITRINE</font></td></tr></table></td></tr><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tr><td height="24"></td></tr></table></td></tr>SUBSTITUIR-VITRINES SUBSTITUIR-BANNER-BAIXO<tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tr><td height="24"></td></tr></table></td></tr>SUBSTITUIR-FOOTER</table></body></html>',
			menu = '<tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730" bgcolor="#FFFFFF" style="background-color: transparent;"><tbody><tr><td><a href="https://www.casamind.com.br/promocao?ReportEmail=header_promo" target="_blank" style="text-decoration:none;font-weight: 600;font-size: 1.2rem;color: #000000;text-transform: uppercase;"><img src="https://lojamindesigns.vteximg.com.br/arquivos/Botoes_PROMO.png" alt="Promoções" title="Promoções"></a></td><td><a href="https://www.casamind.com.br/decoracao/VASOS-E-CACHEPOTS?O=OrderByTopSaleDESC&amp;ReportEmail=header_vasosecachepots" target="_blank" style="text-decoration:none;font-weight: 600;font-size: 1.2rem;color: #000000;text-transform: uppercase;"><img src="https://lojamindesigns.vteximg.com.br/arquivos/Botoes_VASOS E CACHEPOTS.png" alt="Vasos &amp; Cachepots" title="Vasos &amp; Cachepots"></a></td><td><a href="https://www.casamind.com.br/novidades?ReportEmail=header_novidades" target="_blank" style="text-decoration:none;font-weight: 600;font-size: 1.2rem;color: #000000;text-transform: uppercase;"><img src="https://lojamindesigns.vteximg.com.br/arquivos/Botoes_NOVIDADE.png" alt="Novidades" title="Novidades"></a></td><td><a href="https://www.casamind.com.br/moveis2?O=OrderByTopSaleDESC?ReportEmail=header_moveis" target="_blank" style="text-decoration:none;font-weight: 600;font-size: 1.2rem;color: #000000;text-transform: uppercase;"><img src="https://lojamindesigns.vteximg.com.br/arquivos/Botoes_MÓVEIS.png" alt="Móveis" title="Móveis"></a></td></tr></tbody></table></td></tr>',
			footer = '<tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tbody><tr><td><span style="font-size: 12px;"><a href="https://www.casamind.com.br/central-de-relacionamento" style="color: #e94273; text-decoration: none;">CENTRAL DE RELACIONAMENTO</a></span></td><td><div class="img-container center autowidth" align="right"><a href="https://www.instagram.com/casamindbr/" target="_blank"><img align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__ig_30px.png" style="max-width: 100%; display: inline-block; height: 31px; width: auto;" width="30" height="30" alt="Logo Instagram"></a><a href="https://www.facebook.com/casamind" style="margin-left: 9.166575px; width: 100%; height: 100%;" target="_blank"><img align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__fb_30px.png" style="text-decoration: none; border: 0; max-width: 100%; display: inline-block; height: 31px; width: auto;" width="30" height="30" alt="Logo Facebook"></a><a href="https://br.pinterest.com/casamind/" style="margin-left: 9.166575px; width: 100%; height: 100%;" target="_blank"><img align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__pin_30px.png" style="max-width: 100%; display: inline-block; height: 31px; width: auto;" width="30" height="30" alt="Logo Pinterest"></a><a href="https://open.spotify.com/user/haj0455ld4irud1xncxa0ho3p#_=_" style="margin-left: 9.166575px; width: 100%; height: 100%;" target="_blank"><img align="center" border="0" src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__spot_30px.png" style="max-width: 100%; display: inline-block; height: 31px; width: auto;" width="30" height="30" alt="Logo Spotify"></a></div></td></tr></tbody></table></td></tr><tr><td height="15"></td></tr><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tbody><tr><td style="height: 1px;border-top: 1px solid #000000;"></td><td style="height: 1px;border-top: 1px solid #000000;"></td></tr><tr><td height="5"></td></tr><tr><td><div style="font-size: 14px; line-height: 1.2; font-family: Roboto, Tahoma, Verdana, Segoe, sans-serif;"><p style="margin:0"><span style="font-size: 10px;">APROVEITE O CUPOM&nbsp;<span style="background-color: #000000; color: #ffffff;"><strong>MIND10</strong></span><strong>&nbsp;</strong>E GANHE 10% OFF NAS LOJAS*</span></p><p style="font-size: 9px; line-height: 1; word-break: break-word; text-align: left; mso-line-height-alt: 12px; margin-top: 5px; margin-bottom: 0; color: #808080;font-style: italic;">*Cupom válido apenas nas lojas online</p></div></td><td><div class="img-container autowidth" align="right" style="padding-right: 0px; padding-left: 0px;"><a href="https://guten.com.br/" target="_blank"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__guten_maior.png" style="height: 13px; width: auto; max-width: 100%; display: inline-block;" width="58" height="13"></a> <a href="https://loja.imaginarium.com.br" target="_blank"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__img_maior.png" style="height: 17px; width: auto; padding-left: 5px; max-width: 100%; display: inline-block;" width="77" height="17"></a> <a href="https://www.lovebrands.com.br" target="_blank"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__love_maior.png" style="height: 21px; width: auto; padding-left: 5px; max-width: 100%; display: inline-block;" width="51" height="21"></a> <a href="https://www.puket.com.br/" target="_blank"><img src="https://d15k2d11r6t6rl.cloudfront.net/public/users/Integrators/ce3f6a25-b72e-4662-afd3-c45aa4fdc306/casamind/news__puket_maior.png" style="height: 21px; width: auto; padding-left: 5px; max-width: 100%; display: inline-block;" width="56" height="21"></a></div></td></tr><tr><td height="5"></td></tr><tr><td style="height: 1px;border-bottom: 1px solid #000000;"></td><td style="height: 1px;border-bottom: 1px solid #000000;"></td></tr></tbody></table></td></tr><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tbody><tr><td><span style="font-size: 10px;">Você está incrito como&nbsp;<span style="color: #e94273; text-decoration: none;">*|EMAIL|*</span></span></td></tr><tr><td><span style="font-size: 10px;"><a href="https://www.casamind.com.br/account" style="color: #e94273; text-decoration: none;">Atualize suas informações</a>&nbsp;ou&nbsp;<a href="[unsubscribe]" style="color: #e94273; text-decoration: none;">descadastre-se</a></span></td><td><span style="font-size: 10px;"><a href="https://www.casamind.com.br/institucional/seguranca-e-privacidade" style="color: #e94273; text-decoration: none;">Política de privacidade</a></span></td></tr><tr><td><span style="font-size: 10px;">UNI.CO Comércio S/A. | CNPJ 00.399.603/0008-84</span></td></tr><tr><td><span style="font-size: 10px;">Rua Hélio Ossamu Daikuara, 1445 - Galpão 07A</span></td></tr><tr><td><span style="font-size: 10px;">CEP 06807-000, Jardim Vista Alegre, Embu das Artes - SP</span></td></tr><tr><td><span style="font-size: 10px;">© 2021&nbsp;<a href="https://www.casamind.com.br" style="color: #e94273; text-decoration: none;">casamind.com.br</a>. Todos os direitos reservados</span></td></tr></tbody></table></td></tr>',
			vitrines = '<tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tbody><tr><td style="display:DISPLAY1"> <a href="LINK1" title="NOME1" target="_blank"> <img src="IMAGEM1" alt="NOME1" border="0" style="display: block;margin:0 auto;" width="228"> </a> </td><td width="23"></td><td style="display:DISPLAY2"> <a href="LINK2" title="NOME2" target="_blank"> <img src="IMAGEM2" alt="NOME2" border="0" style="display: block;margin:0 auto;" width="228"> </a> </td><td width="23"></td><td style="display:DISPLAY3"> <a href="LINK3" title="NOME3" target="_blank"> <img src="IMAGEM3" alt="NOME3" border="0" style="display: block;margin:0 auto;" width="228"> </a> </td></tr><tr height="32"><td></td><td width="23"></td><td></td><td width="23"></td><td></td></tr><tr><td height="40" align="center" valign="top" style="display:DISPLAY1"> <a href="LINK1" title="NOME1" target="_blank1" style="text-align: center; color:CORDOPRODUTO; text-decoration:none; font-size: 18px; font-weight: bold;"> NOME1 </a> </td><td width="23"></td><td height="40" align="center" valign="top" style="display:DISPLAY2"> <a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:CORDOPRODUTO; text-decoration:none; font-size: 18px; font-weight: bold;"> NOME2 </a> </td><td width="23"></td><td height="40" align="center" valign="top" style="display:DISPLAY3"> <a href="LINK3" title="NOME3" target="_blank" style="text-align: center; color:CORDOPRODUTO; text-decoration:none; font-size: 18px; font-weight: bold;"> NOME3 </a> </td></tr><tr height="16"><td></td><td width="23"></td><td></td><td width="23"></td><td></td></tr><tr><td style="display:DISPLAY1"><table style="margin:0 auto;" cellpadding="0" cellspacing="0" border="0" align="center"><tbody><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="100%"><tbody><tr><td> <a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:line-through; font-size:12px"> DE1 </a> </td></tr><tr><td> <a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:CORDOPRECO; text-decoration:none; font-weight: bold; font-size:24px"> POR1 </a> </td></tr><tr><td> <a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:#838282; text-decoration:none; font-size:12px"> PARCELAMENTO1 </a> </td></tr></tbody></table></td><td> <img src="https://imagens.imgnet.com.br/puket/_2021/ECM/Header_Footer_2021/email-separador.png" border="0" width="20" style="display: block;"> </td><td> <a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:none; font-size:12px"> <img src="BOTAOCTA" alt="eu quero" border="0" width="75" style="display: block;"> </a> </td></tr></tbody></table></td><td width="23"></td><td style="display:DISPLAY2"><table style="margin:0 auto;" cellpadding="0" cellspacing="0" border="0" align="center"><tbody><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="100%"><tbody><tr><td> <a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:line-through; font-size:12px"> DE2 </a> </td></tr><tr><td> <a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:CORDOPRECO; text-decoration:none; font-weight: bold; font-size:24px"> POR2 </a> </td></tr><tr><td> <a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:#838282; text-decoration:none; font-size:12px"> PARCELAMENTO2 </a> </td></tr></tbody></table></td><td> <img src="https://imagens.imgnet.com.br/puket/_2021/ECM/Header_Footer_2021/email-separador.png" border="0" width="20" style="display: block;"> </td><td> <a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:none; font-size:12px"> <img src="BOTAOCTA" alt="eu quero" border="0" width="75" style="display: block;"> </a> </td></tr></tbody></table></td><td width="23"></td><td style="display:DISPLAY3"><table style="margin:0 auto;" cellpadding="0" cellspacing="0" border="0" align="center"><tbody><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="100%"><tbody><tr><td> <a href="LINK3" title="NOME3" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:line-through; font-size:12px"> DE3 </a> </td></tr><tr><td> <a href="LINK3" title="NOME3" target="_blank" style="text-align: center; color:CORDOPRECO; text-decoration:none; font-weight: bold; font-size:24px"> POR3 </a> </td></tr><tr><td> <a href="LINK3" title="NOME3" target="_blank" style="text-align: center; color:#838282; text-decoration:none; font-size:12px"> PARCELAMENTO3 </a> </td></tr></tbody></table></td><td> <img src="https://imagens.imgnet.com.br/puket/_2021/ECM/Header_Footer_2021/email-separador.png" border="0" width="20" style="display: block;"> </td><td> <a href="LINK3" title="NOME3" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:none; font-size:12px"> <img src="BOTAOCTA" alt="eu quero" border="0" width="75" style="display: block;"> </a> </td></tr></tbody></table></td></tr></tbody></table></td></tr>',
			vitrines2 = '<tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tbody><tr><td width="65"></td><td style="display:DISPLAY1"><a href="LINK1" title="NOME1" target="_blank"><img src="IMAGEM1" alt="NOME1" border="0" style="display: block;margin:0 auto;" width="288"></a></td><td width="24"></td><td style="display:DISPLAY2"><a href="LINK2" title="NOME2" target="_blank"><img src="IMAGEM2" alt="NOME2" border="0" style="display: block;margin:0 auto;" width="288"></a></td><td width="65"></td></tr><tr height="16"><td width="65"></td><td></td><td width="24"></td><td></td><td width="65"></td></tr><tr><td width="65"></td><td height="40" align="center" valign="top" style="display:DISPLAY1"><a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:CORDOPRODUTO; text-decoration:none; font-size: 18px; font-weight: bold;">NOME1</a></td><td width="24"></td><td height="40" align="center" valign="top" style="display:DISPLAY2"><a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:CORDOPRODUTO; text-decoration:none; font-size: 18px; font-weight: bold;">NOME2</a></td><td width="65"></td></tr><tr height="16"><td width="65"></td><td></td><td width="24"></td><td></td><td width="65"></td></tr><tr><td width="65"></td><td style="display:DISPLAY1"><table style="margin:0 auto;" cellpadding="0" cellspacing="0" border="0" align="center"><tbody><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="100%"><tbody><tr><td><a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:line-through; font-size:12px">DE1</a></td></tr><tr><td><a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:CORDOPRECO; text-decoration:none; font-weight: bold; font-size:24px">POR1</a></td></tr><tr><td><a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:#838282; text-decoration:none; font-size:12px">PARCELAMENTO1</a></td></tr></tbody></table></td><td><img src="https://imagens.imgnet.com.br/puket/_2021/ECM/Header_Footer_2021/email-separador.png" border="0" width="20" style="display: block;"></td><td><a href="LINK1" title="NOME1" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:none; font-size:12px"><img src="BOTAOCTA" alt="eu quero" border="0" width="75" style="display: block;"></a></td></tr></tbody></table></td><td width="24"></td><td style="display:DISPLAY2"><table style="margin:0 auto;" cellpadding="0" cellspacing="0" border="0" align="center"><tbody><tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="100%"><tbody><tr><td><a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:line-through; font-size:12px">DE2</a></td></tr><tr><td><a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:CORDOPRECO; text-decoration:none; font-weight: bold; font-size:24px">POR2</a></td></tr><tr><td><a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:#838282; text-decoration:none; font-size:12px">PARCELAMENTO2</a></td></tr></tbody></table></td><td><img src="https://imagens.imgnet.com.br/puket/_2021/ECM/Header_Footer_2021/email-separador.png" border="0" width="20" style="display: block;"></td><td><a href="LINK2" title="NOME2" target="_blank" style="text-align: center; color:#4D4D44; text-decoration:none; font-size:12px"><img src="BOTAOCTA" alt="eu quero" border="0" width="75" style="display: block;"></a></td></tr></tbody></table></td><td width="65"></td></tr></tbody></table></td></tr>',
			espaco = ' <tr> <td> <table cellpadding="0" cellspacing="0" border="0" align="center" width="730"> <tr> <td height="24"></td> </tr> </table> </td> </tr> ',
			banner = '<tr><td><table cellpadding="0" cellspacing="0" border="0" align="center" width="730"><tr><td><a href="BANNERLINK" target="_blank"><img src="BANNERIMAGEM" alt="BANNERALT" title="BANNERALT" width="100%" border="0" style="display:block;width:100%;max-width:100%;" align="center"></a></td></tr></table></td></tr>',
			preheader = $('input[name=preheader]').val(),
			vitrineTitle = $('input[name=vitrine-title]').val(),
			columns = $('select[name=vitrine-column-number]').val(),
			vitrineColorTitle = $('input[name=vitrine-title-color]').val(),
			color = $('input[name=vitrine-price-color]').val(),
			textColor = $('input[name=vitrine-text-color]').val(),
			botaoCTA = $('select[name=vitrine-botao-cta]').val();
			
			let vitrineTemp = '',
			vitrineLinha = '',
			bannerTempTop = '',
			bannerTempMid = '',
			bannerTempBot = '',
			bannerTempMidInserted = 0;

			//banners
			$.each($('#banners > .form-group'), function(i){
				let bannerimage = $(this).find('input[name=banner-image-'+ i +']').val(),
				bannerlocal = $(this).find('select[name=banner-local-'+ i +']').val(),
				bannerlink = $(this).find('input[name=banner-link-'+ i +']').val()  + '?reportEmail=banner_'+ bannerlocal +'_' + i,
				bannertitle = $(this).find('input[name=banner-title-'+ i +']').val();

				if(bannerlocal === 'top'){
					if(bannerTempTop.length > 0){
						bannerTempTop += espaco;
					}
					bannerTempTop += banner.replaceAll('BANNERLINK', bannerlink).replaceAll('BANNERALT', bannertitle).replaceAll('BANNERIMAGEM', bannerimage);
				}
				if(bannerlocal === 'mid'){
					if(bannerTempMid.length > 0){
						bannerTempMid += espaco;
					}
					bannerTempMid += banner.replaceAll('BANNERLINK', bannerlink).replaceAll('BANNERALT', bannertitle).replaceAll('BANNERIMAGEM', bannerimage);
				}
				if(bannerlocal === 'bot'){
					if(bannerTempBot.length > 0){
						bannerTempBot += espaco;
					}
					bannerTempBot += banner.replaceAll('BANNERLINK', bannerlink).replaceAll('BANNERALT', bannertitle).replaceAll('BANNERIMAGEM', bannerimage);
				}
			});
			//vitrines & banner meio
			$.each($('#vitrines > .form-group'), function(i){
				let vitrineName = $(this).find('input[name=vitrine-name-'+ i +']').val(),
				vitrineImage = $(this).find('input[name=vitrine-image-'+ i +']').val(),
				vitrineLink = $(this).find('input[name=vitrine-link-'+ i +']').val(),
				vitrinePriceP = $(this).find('input[name=vitrine-priceP-'+ i +']').val(),
				vitrinePriceN = $(this).find('input[name=vitrine-priceN-'+ i +']').val(),
				vitrineInstallments = $(this).find('input[name=vitrine-installments-'+ i +']').val();

				if(vitrineLinha.search("LINK") <= 0){
					if(columns == 2){
						vitrineLinha += vitrines2 + espaco;
					}else{
						vitrineLinha += vitrines + espaco;
					}
				}					

				if(vitrineLinha.search("LINK1") > 0 && vitrineName != ''){			
					vitrineLinha = vitrineLinha.replaceAll('NOME1', vitrineName).replaceAll('IMAGEM1', vitrineImage).replaceAll('LINK1', vitrineLink).replaceAll('DE1', vitrinePriceP).replaceAll('POR1', vitrinePriceN).replaceAll('PARCELAMENTO1', vitrineInstallments).replaceAll('DISPLAY1', 'block');
				}else if(vitrineLinha.search("LINK2") > 0 && vitrineName != ''){			
					vitrineLinha = vitrineLinha.replaceAll('NOME2', vitrineName).replaceAll('IMAGEM2', vitrineImage).replaceAll('LINK2', vitrineLink).replaceAll('DE2', vitrinePriceP).replaceAll('POR2', vitrinePriceN).replaceAll('PARCELAMENTO2', vitrineInstallments).replaceAll('DISPLAY2', 'block');
				}else if(vitrineLinha.search("LINK3") > 0 && vitrineName != ''){			
					vitrineLinha = vitrineLinha.replaceAll('NOME3', vitrineName).replaceAll('IMAGEM3', vitrineImage).replaceAll('LINK3', vitrineLink).replaceAll('DE3', vitrinePriceP).replaceAll('POR3', vitrinePriceN).replaceAll('PARCELAMENTO3', vitrineInstallments).replaceAll('DISPLAY3', 'block');
				}

				if(((i == Math.floor($('#vitrines > .form-group').length / 2) -1) || (i == 2 && $('#vitrines > .form-group').length <= 6)) && !bannerTempMidInserted){
					vitrineLinha += bannerTempMid + espaco;
					bannerTempMidInserted = 1;
				}

			});

			vitrineTemp = vitrineLinha.replaceAll('CORDOPRECO', color).replaceAll('CORDOPRODUTO', textColor).replaceAll('BOTAOCTA', botaoCTA);

			//Oculta vitrines sem produtos
			if(vitrineTemp.search("DISPLAY1") > 0){
				vitrineTemp = vitrineTemp.replaceAll('DISPLAY1', 'none');
			}
			if(vitrineTemp.search("DISPLAY2") > 0){
				vitrineTemp = vitrineTemp.replaceAll('DISPLAY2', 'none');
			}
			if(vitrineTemp.search("DISPLAY3") > 0){
				vitrineTemp = vitrineTemp.replaceAll('DISPLAY3', 'none');
			}

			//montagem de blocos
			html = html.replaceAll('SUBSTITUIR-PREHEADER', preheader).replaceAll('SUBSTITUIR-MENU', menu).replaceAll('SUBSTITUIR-BANNER-TOP', bannerTempTop).replaceAll('SUBSTITUIR-TITLE-VITRINE', vitrineTitle).replaceAll('SUBSTITUIR-VITRINES', vitrineTemp).replaceAll('SUBSTITUIR-BANNER-BAIXO', bannerTempBot).replaceAll('CORDOTITULOVITRINE', vitrineColorTitle).replaceAll('SUBSTITUIR-FOOTER', footer);
			$('#viewRenderedHTML').html(html)
			$('#viewHTMLCode').text(html)

		}
	})
	var copyCode = $('#copytext > .copy').on('click', function(){
		let code = $('#viewHTMLCode').val();

		copyText(code);
	})
})